<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        const url = 'https://restcountries.eu/rest/v2/all' // countries api
        fetch(url)
            .then(response => response.json()) // accessing the API data as JSON
            .then(data => { // getting the data
                console.log(data)
            })
            .catch(error => console.log(error)) // handling error if something wrong happens
        const fetchData = async () => {
            try {
                const response = await fetch(url)
                const countries = await response.json()
                console.log(countries)
            } catch (err) {
                console.log(err)
            }
        }
        console.log('===== async and await')
        fetchData()



        //Exercises1
        //Exercises1.1
        const countriesAPI = 'https://restcountries.eu/rest/v2/all';
        const catsAPI = 'https://api.thecatapi.com/v1/breeds';
        fetch(countriesAPI)
            .then(response => response.json())
            .then(data => {
                data.forEach(element => {
                    console.log('Name:', element['name'], ','
                        , 'Capital', element['capital'], ','
                        , 'Languages', element['languages'], ','
                        , 'Populations', element['population'], ','
                        , 'Area', element['area']);
                });
            })
            .catch(error => console.error(error));
        //Exercises2
        //Exercises2.1
        // fetch(catsAPI)
        //     .then(response => response.json())
        //     .then(data => {
        //         let catName = [];
        //         for (cat of data)
        //             catName.push(cat['name']);
        //         return catName;
        //     })
        //     .catch(error => console.log(error));

        const catNames = async () => {
            try {
                const response = await fetch(catsAPI);
                const cats = await response.json();
                for (cat of cats)
                    console.log(cat['name']);
            } catch (err) {
                console.log(err)
            }
        }
        console.log(catNames());
        //Exercises3
        //Exercises3.1
        const averageCatsWeight = async () => {
            try {
                const response = await fetch(catsAPI);
                const cats = await response.json();

                for (cat of cats)
                    console.log(cat['weight']);
            } catch (err) {
                console.log(err)
            }
        }
        console.log(averageCatsWeight());
        //Exercises3.2
        const tenLargestCountries = async () => {
            try {
                const response = await fetch(countriesAPI);
                const countries = await response.json();
                countries.sort((a, b) =>
                    b['area'] - a['area']
                );
                const tenLargesCountrie = countries.slice(0, 10);
                console.log(tenLargesCountrie);
            } catch (err) {
                console.log(err)
            }
        }
        console.log(tenLargestCountries());
        //Exercises3.3
        const totalLanguagesInTheWorld = async () => {
            try {
                const response = await fetch(countriesAPI);
                const countries = await response.json();
                const languageSet = new Set();
                for (const countrie of countries) {
                    countrie['languages'].forEach(element => {
                        languageSet.add(element['nativeName']);
                    });
                }
                console.log(languageSet.size);
                console.log(languageSet);
            } catch (err) {
                console.log(err)
            }
        }
        console.log(totalLanguagesInTheWorld());

    </script>
</head>

<body>

</body>

</html>